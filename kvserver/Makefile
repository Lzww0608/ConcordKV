# ç¼–è¯‘å™¨å’Œé€‰é¡¹
CC = gcc
CFLAGS = -Wall -g -O2 -fPIC -std=c99
LDFLAGS = -lpthread

# æºæ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶ï¼ˆç§»é™¤æœ‰é—®é¢˜çš„æ–‡ä»¶ï¼‰
CORE_OBJS = kvstore.o kvstore_array.o kvstore_hash.o kvstore_rbtree.o rbtree_adapter.o \
            kv_persist.o kv_concurrency.o kv_transaction.o kv_error.o kv_cluster.o \
            epoll_entry.o

# æµ‹è¯•ç¨‹åºä½¿ç”¨çš„å¯¹è±¡æ–‡ä»¶ï¼ˆä¸åŒ…å«mainå‡½æ•°çš„kvstore.oï¼‰
TEST_OBJS = kvstore_array.o kvstore_hash.o kvstore_rbtree.o rbtree_adapter.o \
            kv_persist.o kv_concurrency.o kv_transaction.o kv_error.o kv_cluster.o \
            kv_memory.o

# æ–°å¢çš„ç»Ÿä¸€å¼•æ“æ¥å£ç›¸å…³æ–‡ä»¶
ENGINE_OBJS = kv_engine_factory.o

# B+Treeå­˜å‚¨å¼•æ“æ–‡ä»¶
BTREE_OBJS = kvstore_btree.o btree_adapter.o

# LSM-Treeç›¸å…³æ–‡ä»¶ ğŸ”¥
LSM_OBJS = lsm_memtable.o lsm_memtable_manager.o

# Cacheç¼“å­˜å±‚ç›¸å…³æ–‡ä»¶ âš¡
CACHE_OBJS = kv_cache.o

# I/Oä¼˜åŒ–å™¨ç›¸å…³æ–‡ä»¶ ğŸš€
IO_OPTIMIZER_OBJS = kv_io_optimizer.o

# æ‰€æœ‰ç›®æ ‡æ–‡ä»¶
ALL_OBJS = $(CORE_OBJS) $(ENGINE_OBJS) $(BTREE_OBJS) $(LSM_OBJS) $(CACHE_OBJS) $(IO_OPTIMIZER_OBJS)

# æµ‹è¯•ç¨‹åºä½¿ç”¨çš„æ‰€æœ‰å¯¹è±¡æ–‡ä»¶
ALL_TEST_OBJS = $(TEST_OBJS) $(ENGINE_OBJS) $(BTREE_OBJS) $(LSM_OBJS) $(CACHE_OBJS) $(IO_OPTIMIZER_OBJS)

# ç›®æ ‡å¯æ‰§è¡Œæ–‡ä»¶
TARGET = kvserver
SHARED_LIB = libkvstore.so
TEST_TARGET = kv_engine_test
BTREE_TEST_TARGET = btree_test
DEBUG_BTREE_TARGET = debug_btree
SIMPLE_DEBUG_TARGET = simple_debug
PRODUCTION_TEST_TARGET = btree_production_test
LSM_MANAGER_TEST_TARGET = lsm_memtable_manager_test
LSM_MEMTABLE_TEST_TARGET = lsm_memtable_test
CACHE_TEST_TARGET = kv_cache_test
CACHE_COMPREHENSIVE_TEST_TARGET = kv_cache_comprehensive_test
CACHE_EXAMPLE_TARGET = cache_example
IO_OPTIMIZER_TEST_TARGET = kv_io_optimizer_test

# é»˜è®¤ç›®æ ‡
all: $(TARGET) $(SHARED_LIB)

# é™æ€ç¼–è¯‘å¯æ‰§è¡Œæ–‡ä»¶
$(TARGET): $(ALL_OBJS)
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

# ç¼–è¯‘å…±äº«åº“
$(SHARED_LIB): $(ALL_OBJS)
	$(CC) -shared $(CFLAGS) -o $@ $^ $(LDFLAGS)

# ç¼–è¯‘æµ‹è¯•ç¨‹åº
$(TEST_TARGET): kv_engine_test.o $(ALL_TEST_OBJS)
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

# ç¼–è¯‘B+Treeæµ‹è¯•ç¨‹åº
$(BTREE_TEST_TARGET): ../tests/kvserver_tests/btree_tests/btree_test.o $(ALL_TEST_OBJS)
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

# ç¼–è¯‘B+Treeè°ƒè¯•ç¨‹åº
$(DEBUG_BTREE_TARGET): ../tests/kvserver_tests/btree_tests/debug_btree.o $(ALL_TEST_OBJS)
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

# ç¼–è¯‘ç®€å•è°ƒè¯•ç¨‹åº
$(SIMPLE_DEBUG_TARGET): ../tests/kvserver_tests/btree_tests/simple_test.o $(ALL_TEST_OBJS)
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

# ç¼–è¯‘ç”Ÿäº§ç¯å¢ƒæµ‹è¯•ç¨‹åº
$(PRODUCTION_TEST_TARGET): ../tests/kvserver_tests/btree_tests/btree_production_test.o $(ALL_TEST_OBJS)
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

# ç¼–è¯‘LSM-Treeç®¡ç†å™¨æµ‹è¯•ç¨‹åº
$(LSM_MANAGER_TEST_TARGET): ../tests/kvserver_tests/lsm_tests/lsm_memtable_manager_test.o $(ALL_TEST_OBJS)
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

# ç¼–è¯‘LSM-Treeå†…å­˜è¡¨æµ‹è¯•ç¨‹åº
$(LSM_MEMTABLE_TEST_TARGET): ../tests/kvserver_tests/lsm_tests/lsm_memtable_test.o $(ALL_TEST_OBJS)
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

# ç¼–è¯‘ç¼“å­˜å±‚æµ‹è¯•ç¨‹åº
$(CACHE_TEST_TARGET): ../tests/kvserver_tests/cache_tests/kv_cache_test.o $(ALL_TEST_OBJS)
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

# ç¼–è¯‘ç¼“å­˜å±‚ç»¼åˆæµ‹è¯•ç¨‹åº
$(CACHE_COMPREHENSIVE_TEST_TARGET): ../tests/kvserver_tests/cache_tests/kv_cache_comprehensive_test.o $(ALL_TEST_OBJS)
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

# ç¼–è¯‘ç¼“å­˜å±‚ç¤ºä¾‹ç¨‹åº
$(CACHE_EXAMPLE_TARGET): ../examples/cache_example.o $(ALL_TEST_OBJS)
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

# ç¼–è¯‘I/Oä¼˜åŒ–å™¨æµ‹è¯•ç¨‹åº ğŸš€
$(IO_OPTIMIZER_TEST_TARGET): ../tests/kvserver_tests/io_optimizer_tests/kv_io_optimizer_test.o $(ALL_TEST_OBJS)
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

# è§„åˆ™ï¼šä».cæ–‡ä»¶ç”Ÿæˆ.oæ–‡ä»¶
%.o: %.c
	$(CC) $(CFLAGS) -c $< -o $@

# ç¼–è¯‘testsç›®å½•ä¸‹çš„.cæ–‡ä»¶
../tests/%.o: ../tests/%.c
	$(CC) $(CFLAGS) -c $< -o $@

# ç¼–è¯‘tests/kvserver_testsç›®å½•ä¸‹çš„.cæ–‡ä»¶
../tests/kvserver_tests/%.o: ../tests/kvserver_tests/%.c
	$(CC) $(CFLAGS) -I. -c $< -o $@

# ç¼–è¯‘tests/kvserver_tests/btree_testsç›®å½•ä¸‹çš„.cæ–‡ä»¶
../tests/kvserver_tests/btree_tests/%.o: ../tests/kvserver_tests/btree_tests/%.c
	$(CC) $(CFLAGS) -I. -c $< -o $@

# ç¼–è¯‘tests/kvserver_tests/hash_testsç›®å½•ä¸‹çš„.cæ–‡ä»¶
../tests/kvserver_tests/hash_tests/%.o: ../tests/kvserver_tests/hash_tests/%.c
	$(CC) $(CFLAGS) -I. -c $< -o $@

# ç¼–è¯‘tests/kvserver_tests/rbtree_testsç›®å½•ä¸‹çš„.cæ–‡ä»¶
../tests/kvserver_tests/rbtree_tests/%.o: ../tests/kvserver_tests/rbtree_tests/%.c
	$(CC) $(CFLAGS) -I. -c $< -o $@

# ç¼–è¯‘tests/kvserver_tests/array_testsç›®å½•ä¸‹çš„.cæ–‡ä»¶
../tests/kvserver_tests/array_tests/%.o: ../tests/kvserver_tests/array_tests/%.c
	$(CC) $(CFLAGS) -I. -c $< -o $@

# ç¼–è¯‘tests/kvserver_tests/system_testsç›®å½•ä¸‹çš„.cæ–‡ä»¶
../tests/kvserver_tests/system_tests/%.o: ../tests/kvserver_tests/system_tests/%.c
	$(CC) $(CFLAGS) -I. -c $< -o $@

# ç¼–è¯‘tests/kvserver_tests/engine_testsç›®å½•ä¸‹çš„.cæ–‡ä»¶
../tests/kvserver_tests/engine_tests/%.o: ../tests/kvserver_tests/engine_tests/%.c
	$(CC) $(CFLAGS) -I. -c $< -o $@

# ç¼–è¯‘tests/kvserver_tests/lsm_testsç›®å½•ä¸‹çš„.cæ–‡ä»¶ ğŸ”¥
../tests/kvserver_tests/lsm_tests/%.o: ../tests/kvserver_tests/lsm_tests/%.c
	$(CC) $(CFLAGS) -I. -c $< -o $@

# ç¼–è¯‘tests/kvserver_tests/cache_testsç›®å½•ä¸‹çš„.cæ–‡ä»¶ âš¡
../tests/kvserver_tests/cache_tests/%.o: ../tests/kvserver_tests/cache_tests/%.c
	$(CC) $(CFLAGS) -I. -c $< -o $@

# ç¼–è¯‘tests/kvserver_tests/io_optimizer_testsç›®å½•ä¸‹çš„.cæ–‡ä»¶ ğŸš€
../tests/kvserver_tests/io_optimizer_tests/%.o: ../tests/kvserver_tests/io_optimizer_tests/%.c
	$(CC) $(CFLAGS) -I. -c $< -o $@

# ç¼–è¯‘examplesç›®å½•ä¸‹çš„.cæ–‡ä»¶
../examples/%.o: ../examples/%.c
	$(CC) $(CFLAGS) -I. -c $< -o $@

# è¿è¡Œæµ‹è¯•
test: $(TEST_TARGET)
	@echo "ğŸš€ è¿è¡Œå­˜å‚¨å¼•æ“æ¥å£æµ‹è¯•..."
	./$(TEST_TARGET)

# è¿è¡ŒB+Treeæµ‹è¯•
run_btree_test: $(BTREE_TEST_TARGET)
	@echo "ğŸŒ³ è¿è¡ŒB+Treeå­˜å‚¨å¼•æ“æµ‹è¯•..."
	./$(BTREE_TEST_TARGET)

# è¿è¡ŒB+Treeè°ƒè¯•ç¨‹åº
run_debug_btree: $(DEBUG_BTREE_TARGET)
	@echo "ğŸ› è¿è¡ŒB+Treeè°ƒè¯•ç¨‹åº..."
	./$(DEBUG_BTREE_TARGET)

# è¿è¡Œç®€å•è°ƒè¯•ç¨‹åº
run_simple_debug: $(SIMPLE_DEBUG_TARGET)
	@echo "ğŸ” è¿è¡Œç®€å•è°ƒè¯•ç¨‹åº..."
	./$(SIMPLE_DEBUG_TARGET)

# è¿è¡Œç”Ÿäº§ç¯å¢ƒæµ‹è¯•
run_production_test: $(PRODUCTION_TEST_TARGET)
	@echo "ğŸ­ è¿è¡ŒB+Treeç”Ÿäº§ç¯å¢ƒçº§åˆ«æ£€æŸ¥..."
	./$(PRODUCTION_TEST_TARGET)

# è¿è¡ŒLSM-Treeç®¡ç†å™¨æµ‹è¯•
run_lsm_manager_test: $(LSM_MANAGER_TEST_TARGET)
	@echo "ğŸ¯ è¿è¡ŒLSM-Treeç®¡ç†å™¨æµ‹è¯•..."
	./$(LSM_MANAGER_TEST_TARGET)

# è¿è¡ŒLSM-Treeå†…å­˜è¡¨æµ‹è¯•
run_lsm_memtable_test: $(LSM_MEMTABLE_TEST_TARGET)
	@echo "ğŸ¯ è¿è¡ŒLSM-Treeå†…å­˜è¡¨æµ‹è¯•..."
	./$(LSM_MEMTABLE_TEST_TARGET)

# è¿è¡Œç¼“å­˜å±‚æµ‹è¯•
run_cache_test: $(CACHE_TEST_TARGET)
	@echo "âš¡ è¿è¡Œç¼“å­˜å±‚åŸºç¡€æµ‹è¯•..."
	./$(CACHE_TEST_TARGET)

# è¿è¡Œç¼“å­˜å±‚ç»¼åˆæµ‹è¯•
run_cache_comprehensive_test: $(CACHE_COMPREHENSIVE_TEST_TARGET)
	@echo "âš¡ è¿è¡Œç¼“å­˜å±‚ç»¼åˆæµ‹è¯•..."
	./$(CACHE_COMPREHENSIVE_TEST_TARGET)

# è¿è¡ŒI/Oä¼˜åŒ–å™¨æµ‹è¯• ğŸš€
run_io_optimizer_test: $(IO_OPTIMIZER_TEST_TARGET)
	@echo "ğŸš€ è¿è¡ŒI/Oä¼˜åŒ–å™¨æµ‹è¯•..."
	./$(IO_OPTIMIZER_TEST_TARGET)

# è¿è¡ŒLSM-Treeæµ‹è¯•
test_lsm: run_lsm_manager_test run_lsm_memtable_test
	@echo "ğŸ”¥ LSM-Treeæµ‹è¯•å®Œæˆ"

# è¿è¡Œç¼“å­˜å±‚æµ‹è¯•
test_cache: run_cache_test run_cache_comprehensive_test
	@echo "âš¡ ç¼“å­˜å±‚æµ‹è¯•å®Œæˆ"

# è¿è¡ŒI/Oä¼˜åŒ–å™¨æµ‹è¯•
test_io_optimizer: run_io_optimizer_test
	@echo "ğŸš€ I/Oä¼˜åŒ–å™¨æµ‹è¯•å®Œæˆ"

# è¿è¡Œç¼“å­˜å±‚ç¤ºä¾‹
run_cache_example: $(CACHE_EXAMPLE_TARGET)
	@echo "ğŸ¯ è¿è¡Œç¼“å­˜å±‚åŠŸèƒ½æ¼”ç¤º..."
	./$(CACHE_EXAMPLE_TARGET)

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
test_all: test run_btree_test run_lsm_manager_test run_lsm_memtable_test test_cache test_io_optimizer
	@echo "âœ… æ‰€æœ‰æµ‹è¯•å®Œæˆ"

# è¿è¡ŒHashå­˜å‚¨å¼•æ“æµ‹è¯•
test_hash:
	@echo "ğŸ—ƒï¸  è¿è¡ŒHashå­˜å‚¨å¼•æ“æµ‹è¯•..."
	@cd ../tests/kvserver_tests/hash_tests && ./run_all_hash_tests.sh

# è¿è¡ŒRBTreeå­˜å‚¨å¼•æ“æµ‹è¯•
test_rbtree:
	@echo "ğŸŒ² è¿è¡ŒRBTreeå­˜å‚¨å¼•æ“æµ‹è¯•..."
	@echo "RBTreeæµ‹è¯•éœ€è¦æ‰‹åŠ¨ç¼–è¯‘å’Œè¿è¡Œ"

# è¿è¡ŒArrayå­˜å‚¨å¼•æ“æµ‹è¯•
test_array:
	@echo "ğŸ“Š è¿è¡ŒArrayå­˜å‚¨å¼•æ“æµ‹è¯•..."
	@echo "Arrayæµ‹è¯•éœ€è¦æ‰‹åŠ¨ç¼–è¯‘å’Œè¿è¡Œ"

# è¿è¡Œç³»ç»ŸåŠŸèƒ½æµ‹è¯•
test_system:
	@echo "âš™ï¸  è¿è¡Œç³»ç»ŸåŠŸèƒ½æµ‹è¯•..."
	@echo "ç³»ç»Ÿæµ‹è¯•éœ€è¦æ‰‹åŠ¨ç¼–è¯‘å’Œè¿è¡Œ"

# è¿è¡Œå¼•æ“æ¥å£æµ‹è¯•
test_engine_interface:
	@echo "ğŸ”§ è¿è¡Œå¼•æ“æ¥å£æµ‹è¯•..."
	@echo "å¼•æ“æ¥å£æµ‹è¯•éœ€è¦æ‰‹åŠ¨ç¼–è¯‘å’Œè¿è¡Œ"

# è¿è¡Œåˆ†ç±»æµ‹è¯•æ±‡æ€»
test_by_category: test_hash test_rbtree test_array test_system test_engine_interface run_btree_test test_lsm test_cache test_io_optimizer
	@echo "ğŸ¯ æ‰€æœ‰åˆ†ç±»æµ‹è¯•å®Œæˆ"

# æ€§èƒ½æµ‹è¯•ï¼ˆæ›´å¤§æ•°æ®é‡ï¼‰
perf_test: $(TEST_TARGET)
	@echo "âš¡ è¿è¡Œæ€§èƒ½æµ‹è¯•..."
	./$(TEST_TARGET) --performance

# éªŒè¯ç¼–è¯‘ï¼ˆæ£€æŸ¥æ‰€æœ‰å¤´æ–‡ä»¶å’Œæ¥å£ï¼‰
verify: $(ALL_OBJS)
	@echo "âœ… æ‰€æœ‰æºæ–‡ä»¶ç¼–è¯‘æˆåŠŸ"
	@echo "ğŸ“‹ ç¼–è¯‘çš„å¯¹è±¡æ–‡ä»¶:"
	@ls -la *.o
	@echo "ğŸ”— æ£€æŸ¥ç¬¦å·è¡¨..."
	@nm -g $(SHARED_LIB) | grep -E "kv_engine|kvs_|btree_" | head -15

# æ¸…ç†
clean:
	rm -f $(TARGET) $(SHARED_LIB) $(TEST_TARGET) $(BTREE_TEST_TARGET) $(DEBUG_BTREE_TARGET) $(SIMPLE_DEBUG_TARGET) $(PRODUCTION_TEST_TARGET) $(LSM_MANAGER_TEST_TARGET) $(LSM_MEMTABLE_TEST_TARGET) *.o ../tests/*.o ../tests/kvserver_tests/*.o

# æ·±åº¦æ¸…ç†ï¼ˆåŒ…æ‹¬å¤‡ä»½æ–‡ä»¶ï¼‰
clean_all: clean
	rm -f *~ *.bak *.swp core.*

# å®‰è£…
install: $(TARGET) $(SHARED_LIB)
	mkdir -p $(DESTDIR)/usr/local/bin
	mkdir -p $(DESTDIR)/usr/local/lib
	mkdir -p $(DESTDIR)/usr/local/include/concordkv
	cp $(TARGET) $(DESTDIR)/usr/local/bin/
	cp $(SHARED_LIB) $(DESTDIR)/usr/local/lib/
	cp kv_engine_interface.h $(DESTDIR)/usr/local/include/concordkv/
	cp kv_store.h $(DESTDIR)/usr/local/include/concordkv/
	cp kv_error.h $(DESTDIR)/usr/local/include/concordkv/
	ldconfig

# å¸è½½
uninstall:
	rm -f $(DESTDIR)/usr/local/bin/$(TARGET)
	rm -f $(DESTDIR)/usr/local/lib/$(SHARED_LIB)
	rm -rf $(DESTDIR)/usr/local/include/concordkv
	ldconfig

# ä»£ç æ£€æŸ¥ï¼ˆä½¿ç”¨é™æ€åˆ†æå·¥å…·ï¼‰
check:
	@echo "ğŸ” è¿è¡Œä»£ç æ£€æŸ¥..."
	@which cppcheck > /dev/null && cppcheck --enable=all --std=c99 *.c || echo "å®‰è£…cppcheckä»¥å¯ç”¨ä»£ç æ£€æŸ¥"
	@which valgrind > /dev/null && echo "âœ… Valgrindå¯ç”¨äºå†…å­˜æ£€æŸ¥" || echo "å®‰è£…valgrindä»¥å¯ç”¨å†…å­˜æ£€æŸ¥"

# å†…å­˜æ£€æŸ¥
memcheck: $(TEST_TARGET)
	@echo "ğŸ” è¿è¡Œå†…å­˜æ³„æ¼æ£€æŸ¥..."
	valgrind --leak-check=full --show-leak-kinds=all --track-origins=yes ./$(TEST_TARGET)

# è°ƒè¯•ç‰ˆæœ¬
debug: CFLAGS += -DDEBUG -O0
debug: clean $(TARGET) $(TEST_TARGET)
	@echo "ğŸ› è°ƒè¯•ç‰ˆæœ¬ç¼–è¯‘å®Œæˆ"

# å‘å¸ƒç‰ˆæœ¬
release: CFLAGS += -DNDEBUG -O3
release: clean $(TARGET) $(SHARED_LIB)
	@echo "ğŸš€ å‘å¸ƒç‰ˆæœ¬ç¼–è¯‘å®Œæˆ"
	strip $(TARGET) $(SHARED_LIB)

# ç”Ÿæˆæ–‡æ¡£
doc:
	@echo "ğŸ“š ç”ŸæˆAPIæ–‡æ¡£..."
	@which doxygen > /dev/null && doxygen Doxyfile || echo "å®‰è£…doxygenä»¥ç”Ÿæˆæ–‡æ¡£"

# ä»£ç æ ¼å¼åŒ–
format:
	@echo "ğŸ¨ æ ¼å¼åŒ–ä»£ç ..."
	@which clang-format > /dev/null && find . -name "*.c" -o -name "*.h" | xargs clang-format -i || echo "å®‰è£…clang-formatä»¥æ ¼å¼åŒ–ä»£ç "

# æ˜¾ç¤ºç¼–è¯‘ä¿¡æ¯
info:
	@echo "ğŸ“‹ ç¼–è¯‘ä¿¡æ¯:"
	@echo "CC: $(CC)"
	@echo "CFLAGS: $(CFLAGS)"
	@echo "LDFLAGS: $(LDFLAGS)"
	@echo "ç›®æ ‡æ–‡ä»¶: $(ALL_OBJS)"
	@echo "å¯æ‰§è¡Œæ–‡ä»¶: $(TARGET)"
	@echo "å…±äº«åº“: $(SHARED_LIB)"
	@echo "æµ‹è¯•ç¨‹åº: $(TEST_TARGET)"
	@echo "B+Treeæµ‹è¯•ç¨‹åº: $(BTREE_TEST_TARGET)"

# å¸®åŠ©ä¿¡æ¯
help:
	@echo "ğŸ†˜ å¯ç”¨çš„makeç›®æ ‡:"
	@echo "  all       - ç¼–è¯‘æ‰€æœ‰ç›®æ ‡ï¼ˆé»˜è®¤ï¼‰"
	@echo "  test      - è¿è¡ŒåŸºç¡€æµ‹è¯•"
	@echo "  test_all  - è¿è¡Œæ‰€æœ‰æ ¸å¿ƒæµ‹è¯•"
	@echo "  test_by_category - è¿è¡Œæ‰€æœ‰åˆ†ç±»æµ‹è¯•"
	@echo ""
	@echo "ğŸ¯ åˆ†ç±»æµ‹è¯•:"
	@echo "  run_btree_test     - B+Treeå­˜å‚¨å¼•æ“æµ‹è¯•"
	@echo "  run_production_test - B+Treeç”Ÿäº§ç¯å¢ƒæ£€æŸ¥"
	@echo "  test_lsm           - LSM-Treeå­˜å‚¨å¼•æ“æµ‹è¯•"
	@echo "  test_cache         - ç¼“å­˜å±‚åŠŸèƒ½æµ‹è¯•"
	@echo "  test_io_optimizer  - I/Oä¼˜åŒ–å™¨åŠŸèƒ½æµ‹è¯•"
	@echo "  test_hash          - Hashå­˜å‚¨å¼•æ“æµ‹è¯•"
	@echo "  test_rbtree        - RBTreeå­˜å‚¨å¼•æ“æµ‹è¯•"
	@echo "  test_array         - Arrayå­˜å‚¨å¼•æ“æµ‹è¯•"
	@echo "  test_system        - ç³»ç»ŸåŠŸèƒ½æµ‹è¯•"
	@echo "  test_engine_interface - å¼•æ“æ¥å£æµ‹è¯•"
	@echo ""
	@echo "ğŸ”§ å…¶ä»–ç›®æ ‡:"
	@echo "  perf_test - è¿è¡Œæ€§èƒ½æµ‹è¯•"
	@echo "  verify    - éªŒè¯ç¼–è¯‘ç»“æœ"
	@echo "  debug     - ç¼–è¯‘è°ƒè¯•ç‰ˆæœ¬"
	@echo "  release   - ç¼–è¯‘å‘å¸ƒç‰ˆæœ¬"
	@echo "  check     - ä»£ç é™æ€æ£€æŸ¥"
	@echo "  memcheck  - å†…å­˜æ³„æ¼æ£€æŸ¥"
	@echo "  format    - ä»£ç æ ¼å¼åŒ–"
	@echo "  doc       - ç”Ÿæˆæ–‡æ¡£"
	@echo "  clean     - æ¸…ç†ç¼–è¯‘äº§ç‰©"
	@echo "  clean_all - æ·±åº¦æ¸…ç†"
	@echo "  install   - å®‰è£…åˆ°ç³»ç»Ÿ"
	@echo "  uninstall - ä»ç³»ç»Ÿå¸è½½"
	@echo "  info      - æ˜¾ç¤ºç¼–è¯‘ä¿¡æ¯"
	@echo "  help      - æ˜¾ç¤ºæ­¤å¸®åŠ©"

# å£°æ˜ä¼ªç›®æ ‡
.PHONY: all clean clean_all install uninstall test perf_test verify check memcheck debug release doc format info help
